<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω nh√¢n vi√™n</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        /* Bi·∫øn CSS ƒë·ªìng b·ªô theo giao di·ªán c·ªßa b·∫°n (image_b1f803.png) */
        :root {
            --primary-green-dark: #28a745; 
            --primary-green-light: #e8f9e8;
            --secondary-green-text: #1f421f;
            --background-color: #f7fcf7;
            --shadow-color: rgba(0, 0, 0, 0.08);
            --border-color: #e1e1e1;
            --light-green-border: #cde8c8;
        }

        body {
            background-color: var(--background-color);
            font-family: "Segoe UI", sans-serif;
        }
        
        /* ====== HEADER CHUNG ====== */
        .app-header {
            background-color: var(--primary-green-dark);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px var(--shadow-color);
            margin-bottom: 20px;
        }
        
        /* ====== CARD CHUNG ====== */
        .custom-card {
            background-color: #fff;
            border-radius: 8px; 
            box-shadow: 0 1px 6px var(--shadow-color);
            border: 1px solid var(--border-color);
            margin-bottom: 20px; 
        }

        /* ====== N√öT XANH ƒê·∫¨M (btn-xanhbo) & N√öT TR√äN HEADER ====== */
        .btn-xanhbo {
            background-color: var(--primary-green-dark);
            color: #fff;
            border: none;
            transition: 0.3s;
            font-weight: 500;
            border-radius: 4px; /* H∆°i vu√¥ng h∆°n so v·ªõi tr∆∞·ªõc ƒë·ªÉ kh·ªõp v·ªõi h√¨nh ·∫£nh */
            padding: 8px 15px;
            font-size: 14px;
        }
        .btn-xanhbo:hover {
            background-color: #218838; 
            color: #fff;
        }
        .btn-outline-green {
             border: 1px solid var(--primary-green-dark);
             color: var(--primary-green-dark);
             background-color: transparent;
        }
        .btn-outline-green:hover {
            background-color: var(--primary-green-light);
            color: var(--primary-green-dark);
        }
        
        /* ====== THANH T√åM KI·∫æM & H√ÄNH ƒê·ªòNG ====== */
        .action-bar {
            padding: 12px 16px;
            display: flex; /* ƒê·∫£m b·∫£o layout ngang */
            gap: 10px;
        }
        .form-control, .form-select {
            border-radius: 4px;
            font-size: 14px;
            border-color: var(--light-green-border);
        }
        
        /* ====== B·∫¢NG D·ªÆ LI·ªÜU ====== */
        .table thead {
            background-color: var(--primary-green-light); 
            color: var(--secondary-green-text);
            font-weight: 600;
            font-size: 14px;
        }
        .table th, .table td {
            padding: 10px 15px;
            vertical-align: middle;
        }
        /* D√≤ng xen k·∫Ω kh√¥ng c·∫ßn n·ªØa v√¨ h√¨nh ·∫£nh g·ªëc kh√¥ng c√≥ striped, nh∆∞ng gi·ªØ l·∫°i cho r√µ r√†ng */
        .table-striped > tbody > tr:nth-of-type(odd) {
            background-color: var(--primary-green-light); 
        }

        /* BADGES - ƒê·ªìng b·ªô m√†u s·∫Øc v·ªõi h√¨nh ·∫£nh g·ªëc */
        .badge-status {
            font-size: 12px;
            padding: 6px 8px;
            border-radius: 4px;
            font-weight: 500;
            display: inline-block;
            line-height: 1; /* C·ªë ƒë·ªãnh chi·ªÅu cao badge */
        }
        .bg-active { background-color: #28a745; color: white; } /* Xanh l√° cho ƒêang ho·∫°t ƒë·ªông */
        .bg-locked { background-color: #dc3545; color: white; } /* ƒê·ªè cho B·ªã kh√≥a */
        .bg-inactive { background-color: #ffc107; color: black; } /* V√†ng cho Ngh·ªâ vi·ªác */
        
        /* N√∫t S·ª≠a/Kh√≥a trong b·∫£ng - L√†m cho g·ªçn */
        .btn-sm-action {
            padding: 4px 8px;
            font-size: 12px;
            border-radius: 4px;
            font-weight: 500;
            line-height: 1;
        }

        /* Footer ƒë∆°n gi·∫£n */
        .app-footer {
            padding: 10px 0;
            text-align: right;
            font-size: 12px;
            color: #6c757d;
        }
    </style>
</head>
<body>
    <div class="container-fluid mt-4">
        
        <div class="app-header d-flex justify-content-between align-items-center">
            <h4 class="fw-semibold m-0"><i class="fa-solid fa-users"></i> Qu·∫£n l√Ω Nh√¢n vi√™n</h4>
            </div>
        
        <div class="custom-card action-bar">
            <input type="text" id="globalSearchBox" class="form-control" placeholder="üîç T√¨m theo M√£ NV, H·ªç t√™n..." style="max-width: 250px;">
            
            <button class="btn btn-xanhbo" data-bs-toggle="modal" data-bs-target="#employeeModal" onclick="prepareForm('add')">
                <i class="fa fa-plus"></i> Th√™m Nh√¢n vi√™n m·ªõi
            </button>
            
            <div class="ms-auto d-flex align-items-center">
                <select id="filterStatus" class="form-select form-select-sm" style="width: 150px;" onchange="applyFilter()">
                    <option value="">T·∫•t c·∫£ Tr·∫°ng th√°i</option>
                    <option value="active">ƒêang ho·∫°t ƒë·ªông</option>
                    <option value="locked">B·ªã kh√≥a</option>
                    <option value="inactive">Ngh·ªâ vi·ªác</option>
                </select>
            </div>
        </div>

        <div class="custom-card p-0 table-responsive">
            <table class="table table-bordered table-hover align-middle mb-0">
                <thead class="table-success">
                    <tr>
                        <th>M√£ NV</th>
                        <th>H·ªç t√™n</th>
                        <th>Ch·ª©c v·ª•</th>
                        <th>S·ªë ƒëi·ªán tho·∫°i</th>
                        <th>Tr·∫°ng th√°i</th>
                        <th class="text-center">H√†nh ƒë·ªông</th>
                    </tr>
                </thead>
                <tbody id="employeeTableBody">
                    </tbody>
            </table>
        </div>
        
        <div class="app-footer">
            <span>¬© 2025</span> | <span>Kho Ebike System</span>
        </div>
    </div>

    <div class="modal fade" id="employeeModal" tabindex="-1" aria-labelledby="employeeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header" style="background-color: var(--primary-green-dark); color: white;">
                    <h5 class="modal-title" id="employeeModalLabel">Th√™m Nh√¢n vi√™n m·ªõi</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="employeeForm">
                        <input type="hidden" id="employeeIdInput">
                        <div class="mb-3">
                            <label for="nameInput" class="form-label">H·ªç t√™n</label>
                            <input type="text" class="form-control" id="nameInput" required>
                        </div>
                        <div class="mb-3">
                            <label for="positionInput" class="form-label">Ch·ª©c v·ª•</label>
                            <select class="form-select" id="positionInput" required>
                                <option value="">Ch·ªçn ch·ª©c v·ª•</option>
                                <option value="Qu·∫£n l√Ω kho">Qu·∫£n l√Ω kho</option>
                                <option value="Nh√¢n vi√™n b√°n h√†ng">Nh√¢n vi√™n b√°n h√†ng</option>
                                <option value="K·∫ø to√°n">K·∫ø to√°n</option>
                                <option value="Nh√¢n vi√™n kho">Nh√¢n vi√™n kho</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="phoneInput" class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
                            <input type="tel" class="form-control" id="phoneInput" pattern="[0-9]{10,11}" title="Ch·ªâ ch·∫•p nh·∫≠n s·ªë ƒëi·ªán tho·∫°i" required>
                        </div>
                        <div class="mb-3">
                            <label for="statusInput" class="form-label">Tr·∫°ng th√°i</label>
                            <select class="form-select" id="statusInput" required>
                                <option value="active">ƒêang ho·∫°t ƒë·ªông</option>
                                <option value="locked">B·ªã kh√≥a</option>
                                <option value="inactive">Ngh·ªâ vi·ªác</option>
                            </select>
                        </div>
                        </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">H·ªßy</button>
                    <button type="submit" class="btn btn-xanhbo" id="saveEmployeeBtn" onclick="saveEmployee()">L∆∞u</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // D·ªØ li·ªáu gi·∫£ l·∫≠p
        let employeeData = [
            { id: 'NV001', name: 'Nguy·ªÖn VƒÉn A', position: 'Qu·∫£n l√Ω kho', phone: '0901xxx123', status: 'active' },
            { id: 'NV002', name: 'Tr·∫ßn Th·ªã B', position: 'Nh√¢n vi√™n b√°n h√†ng', phone: '0902xxx456', status: 'active' },
            { id: 'NV003', name: 'L√™ VƒÉn C', position: 'K·∫ø to√°n', phone: '0903xxx789', status: 'locked' },
            { id: 'NV004', name: 'Ph·∫°m Th·ªã D', position: 'Nh√¢n vi√™n kho', phone: '0904xxx012', status: 'inactive' },
        ];
        
        let filteredEmployees = [...employeeData];
        let currentMode = 'add'; // 'add' or 'edit'

        function getStatusBadge(status) {
            let text, className;
            switch (status) {
                case 'active':
                    text = 'ƒêang ho·∫°t ƒë·ªông';
                    className = 'bg-active';
                    break;
                case 'locked':
                    text = 'B·ªã kh√≥a';
                    className = 'bg-locked';
                    break;
                case 'inactive':
                    text = 'Ngh·ªâ vi·ªác';
                    className = 'bg-inactive';
                    break;
                default:
                    text = 'Kh√¥ng x√°c ƒë·ªãnh';
                    className = 'bg-secondary';
            }
            return `<span class="badge badge-status ${className}">${text}</span>`;
        }
        
        function renderActionButtons(employeeId) {
            // Ch·ªâ gi·ªØ l·∫°i n√∫t "S·ª≠a" theo y√™u c·∫ßu m·ªõi
            return `
                <button class="btn btn-sm-action btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#employeeModal" onclick="prepareForm('edit', '${employeeId}')">
                    <i class="fa fa-pen"></i> S·ª≠a
                </button>
            `;
        }

        /**
         * Render l·∫°i b·∫£ng nh√¢n vi√™n d·ª±a tr√™n d·ªØ li·ªáu ƒë√£ l·ªçc.
         */
        function renderTable(data) {
            const tbody = document.getElementById('employeeTableBody');
            tbody.innerHTML = '';
            
            if (data.length === 0) {
                tbody.innerHTML = `<tr><td colspan="6" class="text-center p-4 text-muted">Kh√¥ng t√¨m th·∫•y nh√¢n vi√™n n√†o ph√π h·ª£p.</td></tr>`;
                return;
            }

            data.forEach(emp => {
                const row = `
                    <tr>
                        <td>${emp.id}</td>
                        <td>${emp.name}</td>
                        <td>${emp.position}</td>
                        <td>${emp.phone}</td>
                        <td>${getStatusBadge(emp.status)}</td>
                        <td class="text-center">
                            ${renderActionButtons(emp.id)}
                        </td>
                    </tr>
                `;
                tbody.insertAdjacentHTML('beforeend', row);
            });
        }
        
        /**
         * √Åp d·ª•ng b·ªô l·ªçc v√† t√¨m ki·∫øm.
         */
        function applyFilter() {
            const statusFilter = document.getElementById('filterStatus').value;
            const searchInput = document.getElementById('globalSearchBox').value.toLowerCase();

            filteredEmployees = employeeData.filter(emp => {
                // L·ªçc theo Tr·∫°ng th√°i
                if (statusFilter && emp.status !== statusFilter) return false;
                
                // L·ªçc theo T√¨m ki·∫øm (M√£ NV ho·∫∑c H·ªç t√™n)
                if (searchInput && !(emp.id.toLowerCase().includes(searchInput) || emp.name.toLowerCase().includes(searchInput))) return false;

                return true;
            });

            renderTable(filteredEmployees);
        }

        // --- Qu·∫£n l√Ω Form Modal ---

        /**
         * Thi·∫øt l·∫≠p form cho ch·∫ø ƒë·ªô Th√™m m·ªõi ho·∫∑c Ch·ªânh s·ª≠a.
         */
        function prepareForm(mode, id = null) {
            currentMode = mode;
            const modalTitle = document.getElementById('employeeModalLabel');
            const saveBtn = document.getElementById('saveEmployeeBtn');
            const form = document.getElementById('employeeForm');
            
            // 1. Reset Form
            form.reset(); 
            document.getElementById('employeeIdInput').value = '';
            
            if (mode === 'add') {
                modalTitle.textContent = 'Th√™m Nh√¢n vi√™n m·ªõi';
                saveBtn.textContent = 'L∆∞u';
                // T·ª± ƒë·ªông sinh ID gi·∫£ ƒë·ªãnh cho ch·∫ø ƒë·ªô Add
                const newIdNum = employeeData.length > 0 ? parseInt(employeeData[employeeData.length - 1].id.substring(2)) + 1 : 1;
                const newId = 'NV' + newIdNum.toString().padStart(3, '0');
                document.getElementById('employeeIdInput').value = newId;
                
            } else if (mode === 'edit' && id) {
                modalTitle.textContent = 'Ch·ªânh s·ª≠a th√¥ng tin Nh√¢n vi√™n';
                saveBtn.textContent = 'C·∫≠p nh·∫≠t';
                
                const emp = employeeData.find(e => e.id === id);
                if (emp) {
                    // ƒê·ªï d·ªØ li·ªáu v√†o form
                    document.getElementById('employeeIdInput').value = emp.id;
                    document.getElementById('nameInput').value = emp.name;
                    document.getElementById('positionInput').value = emp.position;
                    document.getElementById('phoneInput').value = emp.phone;
                    document.getElementById('statusInput').value = emp.status;
                }
            }
        }
        
        /**
         * X·ª≠ l√Ω l∆∞u th√¥ng tin (Th√™m m·ªõi ho·∫∑c C·∫≠p nh·∫≠t).
         */
        function saveEmployee() {
            const id = document.getElementById('employeeIdInput').value;
            const name = document.getElementById('nameInput').value;
            const position = document.getElementById('positionInput').value;
            const phone = document.getElementById('phoneInput').value;
            const status = document.getElementById('statusInput').value;
            
            if (!name || !position || !phone || !status) {
                alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin.");
                return;
            }

            if (currentMode === 'add') {
                // Th√™m m·ªõi
                const newEmployee = { id, name, position, phone, status };
                employeeData.push(newEmployee);
                alert(`ƒê√£ th√™m nh√¢n vi√™n m·ªõi: ${name} (${id})`);
                
            } else if (currentMode === 'edit') {
                // C·∫≠p nh·∫≠t
                const index = employeeData.findIndex(e => e.id === id);
                if (index !== -1) {
                    employeeData[index].name = name;
                    employeeData[index].position = position;
                    employeeData[index].phone = phone;
                    employeeData[index].status = status;
                    alert(`ƒê√£ c·∫≠p nh·∫≠t th√¥ng tin nh√¢n vi√™n: ${name} (${id})`);
                }
            }
            
            // ƒê√≥ng Modal v√† render l·∫°i b·∫£ng
            const modal = bootstrap.Modal.getInstance(document.getElementById('employeeModal'));
            modal.hide();
            applyFilter(); 
        }

        // G·∫Øn s·ª± ki·ªán cho √¥ t√¨m ki·∫øm
        document.getElementById('globalSearchBox').addEventListener('keyup', applyFilter);


        // Kh·ªüi t·∫°o b·∫£ng khi trang t·∫£i xong
        document.addEventListener('DOMContentLoaded', function() {
            renderTable(employeeData);
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>