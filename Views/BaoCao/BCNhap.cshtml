@using Microsoft.AspNetCore.Http
@{
    ViewData["Title"] = "Xem Báo Cáo Nhập";
    var user = Context.Session.GetString("User");
}

<div class="container-fluid">

    <div class="callout callout-success mb-4">
        <h4 class="fw-semibold">
            <i class="fas fa-box-open mr-2"></i> Báo cáo nhập hàng
        </h4>
        <p class="mb-0">
            Xin chào, *@(user ?? "Người dùng")*
        </p>
    </div>

    <div class="row">
        
        <div class="col-md-3">
            <div class="card card-outline card-success mb-4">
                <div class="card-header">
                    <h3 class="card-title fw-bold">Bộ lọc</h3>
                </div>
                <div class="card-body">
                    <form id="filterForm"> 
                        
                        <div class="form-group mb-3">
                            <label class="form-label fw-semibold">Chi nhánh</label>
                            <select class="form-control form-control-sm" name="ChiNhanh">
                                <option selected>CN Nguyễn Văn Cừ - Cần Thơ</option>
                                <option>Tất cả</option>
                                <option>CN Lê Lợi - Đà Nẵng</option>
                                <option>CN Quang Trung - HCM</option>
                            </select>
                        </div>

                        <div class="form-group mb-3 border-top pt-2">
                            <label class="form-label fw-semibold">Trạng thái</label>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="Status" id="status1" checked>
                                <label class="form-check-label" for="status1">Phiếu tạm</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="Status" id="status2" checked>
                                <label class="form-check-label" for="status2">Đã nhập hàng</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="Status" id="status3">
                                <label class="form-check-label" for="status3">Đã hủy</label>
                            </div>
                        </div>

                        <div class="form-group mb-3 border-top pt-2">
                            <label class="form-label fw-semibold">Thời gian</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="TimeFilter" id="time1" value="month" checked>
                                <label class="form-check-label" for="time1">Tháng này</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="TimeFilter" id="time2" value="custom">
                                <label class="form-check-label" for="time2">Tùy chỉnh</label>
                            </div>
                        </div>

                        <div id="dateRange" style="display: none;" class="row mb-3">
                            <div class="col-6">
                                <label class="form-label small">Từ ngày</label>
                                <input type="date" class="form-control form-control-sm" name="TuNgay">
                            </div>
                            <div class="col-6">
                                <label class="form-label small">Đến ngày</label>
                                <input type="date" class="form-control form-control-sm" name="DenNgay">
                            </div>
                        </div>

                        <div class="form-group mb-3 border-top pt-2">
                            <label class="form-label fw-semibold">Nhà cung cấp</label>
                            <select class="form-control form-control-sm" name="NhaCungCap">
                                <option selected>Tất cả</option>
                                <option>VIPOMALL</option>
                                <option>SAKI</option>
                                <option>EBIKE Phụ Tùng</option>
                            </select>
                        </div>
                        
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-success mt-2">
                                <i class="fas fa-filter"></i> Lọc báo cáo
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-md-9">

            <div class="row mb-4">
                <div class="col-md-4 col-sm-6 col-12">
                    <div class="info-box bg-gradient-success">
                        <span class="info-box-icon"><i class="fas fa-file-invoice"></i></span>
                        <div class="info-box-content">
                            <span class="info-box-text">Tổng số phiếu nhập</span>
                            <span class="info-box-number">12</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-6 col-12">
                    <div class="info-box bg-gradient-success">
                        <span class="info-box-icon"><i class="fas fa-money-bill-wave"></i></span>
                        <div class="info-box-content">
                            <span class="info-box-text">Tổng giá trị nhập</span>
                            <span class="info-box-number">156,800,000 ₫</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-6 col-12">
                    <div class="info-box bg-gradient-success">
                        <span class="info-box-icon"><i class="fas fa-handshake"></i></span>
                        <div class="info-box-content">
                            <span class="info-box-text">Số nhà cung cấp tham gia</span>
                            <span class="info-box-number">3</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header bg-success">
                    <h3 class="card-title text-white">Chi tiết phiếu nhập</h3>
                </div>
                <div class="card-body">
                    <table id="baoCaoNhapTable" class="table table-bordered table-striped">
                        <thead>
                            <tr>
                                <th>Mã phiếu</th>
                                <th>Ngày nhập</th>
                                <th>Nhà cung cấp</th>
                                <th>Chi nhánh</th>
                                <th>Tổng giá trị</th>
                                <th>Trạng thái</th>
                                <th>#</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>PN00452</td>
                                <td>03/11/2025</td>
                                <td>VIPOMALL</td>
                                <td>CN Nguyễn Văn Cừ</td>
                                <td>12,600,000 ₫</td>
                                <td><span class="badge bg-success">Hoàn tất</span></td>
                                <td><a href="#" class="text-info"><i class="fas fa-eye"></i></a></td>
                            </tr>
                            <tr>
                                <td>PN00451</td>
                                <td>02/11/2025</td>
                                <td>SAKI</td>
                                <td>CN Lê Lợi</td>
                                <td>24,000,000 ₫</td>
                                <td><span class="badge bg-info">Đã xác nhận</span></td>
                                <td><a href="#" class="text-info"><i class="fas fa-eye"></i></a></td>
                            </tr>
                            <tr>
                                <td>PN00449</td>
                                <td>01/11/2025</td>
                                <td>EBIKE Phụ Tùng</td>
                                <td>CN Quang Trung</td>
                                <td>18,450,000 ₫</td>
                                <td><span class="badge bg-warning">Đang xử lý</span></td>
                                <td><a href="#" class="text-info"><i class="fas fa-eye"></i></a></td>
                            </tr>
                            <tr><td>PN00448</td><td>31/10/2025</td><td>VIPOMALL</td><td>CN Nguyễn Văn Cừ</td><td>15,000,000 ₫</td><td><span class="badge bg-success">Hoàn tất</span></td><td><a href="#" class="text-info"><i class="fas fa-eye"></i></a></td></tr>
                            <tr><td>PN00447</td><td>30/10/2025</td><td>SAKI</td><td>CN Lê Lợi</td><td>9,200,000 ₫</td><td><span class="badge bg-warning">Đang xử lý</span></td><td><a href="#" class="text-info"><i class="fas fa-eye"></i></a></td></tr>
                            <tr><td>PN00446</td><td>29/10/2025</td><td>VIPOMALL</td><td>CN Quang Trung</td><td>5,500,000 ₫</td><td><span class="badge bg-success">Hoàn tất</span></td><td><a href="#" class="text-info"><i class="fas fa-eye"></i></a></td></tr>
                            <tr><td>PN00445</td><td>28/10/2025</td><td>EBIKE Phụ Tùng</td><td>CN Nguyễn Văn Cừ</td><td>30,000,000 ₫</td><td><span class="badge bg-info">Đã xác nhận</span></td><td><a href="#" class="text-info"><i class="fas fa-eye"></i></a></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card card-success card-outline">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-chart-bar mr-1"></i>
                        Thống kê giá trị nhập theo nhà cung cấp
                    </h3>
                </div>
                <div class="card-body">
                    <canvas id="chartNhap" height="100"></canvas>
                </div>
            </div>
        </div>
    </div>
</div> 